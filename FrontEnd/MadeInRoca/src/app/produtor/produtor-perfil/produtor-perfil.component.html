<!-- MODAL EDITAR PRODUTO -->
<div class="modal fade" id="modalEditar" tabindex="-1" role="dialog" aria-labelledby="modalEditarLabel"
  aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="modalEditarLabel">Atualizar informações</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label for="nome">Nome</label>
          <input type="text" id="nome" class="form-control" [(ngModel)]="produto.nome" />
          <label for="nome">Descrição</label>
          <textarea maxlength="240" placeholder="Faça uma descrição para seu produto de até 240 caracteres" id="descricao" name="descricao" class="form-control" [(ngModel)]="produto.descricao" rows="4" cols="50"></textarea>
          <label for="preco">Preço</label>
          <input type="number" id="preco" min="0" class="form-control" step="0.01" [(ngModel)]="produto.preco" />
          <label for="qtdeEstoque">Quantidade Em Estoque</label>
          <input type="number" id="qtdeEstoque" min="1" class="form-control" [(ngModel)]="produto.qtdeEstoque" />
          <label for="qtdeEstoque">Foto</label>
          <input type="text" id="foto" class="form-control" [(ngModel)]="produto.foto" />
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">
          Cancelar
        </button>
        <button type="button" class="btn btn-primary" data-dismiss="modal" (click)="putProduto()">
          Salvar mudanças
        </button>
      </div>
    </div>
  </div>
</div>
<!-- /MODAL EDITAR PRODUTO -->

<!-- MODAL EXCLUIR PRODUTO -->
<div class="modal fade" id="modalExcluir" tabindex="-1" role="dialog" aria-labelledby="modalExcluirLabel"
  aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="modalExcluirLabel">Deletar</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div>Você tem certeza que quer excluir o produto?</div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">
          Cancelar
        </button>
        <button type="button" class="btn btn-danger" data-dismiss="modal" (click)="delProduto()">
          Excluir
        </button>
      </div>
    </div>
  </div>
</div>
<!-- MODAL EXCLUIR PRODUTO -->

<!-- MODAL EDITAR CATEGORIA -->
<div class="modal fade" id="modalEditarCategoria" tabindex="-1" role="dialog"
  aria-labelledby="modalEditarCategoriaLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="modalEditarCategoriaLabel">
          Editar Categoria
        </h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label for="categoria">Categoria</label>
          <input id="categoria" class="form-control" type="text" [(ngModel)]="categoria.nome" />
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-danger" data-dismiss="modal">Cancelar</button>
        <button class="btn btn-success" data-dismiss="modal" (click)="putCategoria()">
          Atualizar
        </button>
      </div>
    </div>
  </div>
</div>
<!-- MODAL EDITAR CATEGORIA -->

<!-- MODAL EXCLUIR CATEGORIA -->
<div class="modal fade" id="modalExcluirCategoria" tabindex="-1" role="dialog"
  aria-labelledby="modalExcluirCategoriaLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="modalExcluirCategoriaLabel">
          Exclusão de Categoria!
        </h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div>Você tem certeza que quer excluir esta categoria?</div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">
          Cancelar
        </button>
        <button type="button" class="btn btn-danger" data-dismiss="modal" (click)="delCategoria()">
          Excluir
        </button>
      </div>
    </div>
  </div>
</div>
<!-- MODAL EXCLUIR CATEGORIA -->

<!-- Modal Excluir Usuário -->
<div class="modal fade" id="modalUsuario" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
  aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Mensagem!</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        Você tem certeza que deseja excluir este usuário?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
        <button type="button" class="btn btn-danger" data-dismiss="modal" (click)='deleteUsuario()'>Excluir</button>
      </div>
    </div>
  </div>
</div>
<!-- /Modal Excluir Usuário -->

<!-- MENU LATERAL DE PERFIL -->
<div class="container-fluid">
  <div class="container py-3">
    <div class="row flex-wrap d-flex justify-content-center">
      <div class="col-md-3 m-0 p-0 d-flex flex-column menu-perfil">
        <div class="px-4 container-page" style="background-color: white">
          <div class="justify-content-center align-items-center mt-4 mb-3 imagem-perfil">
            <img class="img-fluid" src="{{foto}}" alt="foto pessoal ilustrando o perfil" />
          </div>
          <div class="d-flex flex-column align-items-center">
            <p class="uppercase mt-3 mb-0">
              {{ nome }}
            </p>
            <p class="mb-3 mt-0">
              {{ email }}
            </p>
          </div>
          <!-- LINKS PARA CADA ABA DO PERFIL -->
          <div class="nav d-flex text-truncate nav-pills mb-3 justify-content-center" id="v-pills-tab" role="tab"
            aria-orientation="vertical">
            <a class="nav-link active" id="v-pills-home-tab" data-toggle="pill" href="#v-pills-home" role="tab"
              aria-controls="v-pills-home" aria-selected="false">
              <div class="d-flex align-items-center">
                <img class="icon" src="../../../assets/svg/farmer.svg"
                  alt="icone de um produtor rural utilizada para sinalizar a aba de perfil" />
                <div class="drop-text ml-2">Meu perfil</div>
              </div>
            </a>
            <a (click)="findUsuarioById()" class="nav-link" id="v-pills-profile-tab" data-toggle="pill"
              href="#v-pills-profile" role="tab" aria-controls="v-pills-profile" aria-selected="false">
              <div class="d-flex align-items-center">
                <img class="icon" src="../../../assets/svg/harvest.svg"
                  alt="icone de um conjunto de frutas utilizada para sinalizar a aba de meus produtos" />
                <div class="drop-text ml-2">Meus produtos</div>
              </div>
            </a>
            <a class="nav-link" id="v-pills-messages-tab" data-toggle="pill" href="#v-pills-messages" role="tab"
              aria-controls="v-pills-messages" aria-selected="false">
              <div class="d-flex align-items-center">
                <img class="icon" src="../../../assets/svg/shopping-cart.svg"
                  alt="icone de uma carrinho de compras utilizada para sinalizar a aba de compras" />
                <div class="drop-text ml-2">Compras</div>
              </div>
            </a>

            <a *ngIf="tipoUsuario == 'adm'" (click)="getAllProdutos()" class="nav-link" id="v-pills-adm-tab" data-toggle="pill" href="#v-pills-adm"

              role="tab" aria-controls="v-pills-home" aria-selected="true">
              <div class="d-flex align-items-center">
                <img class="icon" style="min-height: 20px; min-width: 20px;" src="../../../assets/svg/settings.svg"
                  alt="icone de uma engrenagem utilizada para sinalizar a aba de administrador" />
                <div class="drop-text ml-2">Administrador</div>
              </div>
            </a>
          </div>
          <!-- /LINKS PARA CADA ABA DO PERFIL -->
        </div>
      </div>
      <div class="col-md-9 container-page">
        <div class="tab-content" id="v-pills-tabContent">
          <!-- ATUALIZAR CADASTRO -->
          <div class="tab-pane fade show active" id="v-pills-home" role="tabpanel" aria-labelledby="v-pills-home-tab">
            <div class="row mb-2">
              <div class="col-md-11 justify-content-center flex-column px-4 margin-left"
                style="background-color: white">
                <h4 class="mt-4">Atualizar cadastro</h4>
                <div class="form-group">
                  <label for="nome">Nome Completo</label>
                  <input [(ngModel)]="usuario.nome"  class="form-control" type="text" name="nome" id="nome"
                    placeholder="Insira seu nome completo" />
                </div>
                <div class="form-group">
                  <label for="Email">E-mail</label>
                  <input [(ngModel)]="usuario.usuario" [(ngModel)]="usuario.email" class="form-control" type="text" name="email" id="email"
                    placeholder="Insira seu e-mail" />
                </div>
                <div class="form-group">
                  <label for="Senha">Senha</label>
                  <input (input)="confirmSenha($event)" class="form-control" type="password" name="senha" id="senha"
                    placeholder="Digite sua senha" />
                </div>
                <div class="form-group">
                  <label for="confirmSenha">Confirmar Senha</label>
                  <input [(ngModel)]="usuario.senha" class="form-control" type="password" name="confirmSenha"
                    id="confirmSenha" placeholder="Confirme sua senha" />
                </div>
                <div class="form-group">
                  <label for="foto">Foto</label>
                  <input [(ngModel)]="usuario.foto" name="foto" class="form-control" id="foto"
                    placeholder="Insira o link da sua foto" />
                </div>
                <div class="my-3">
                  <button class="btn btn-danger mr-3" [routerLink]="['/home']"
                    routerLinkActive="router-link-active">Cancelar</button>
                  <button class="btn btn-success" data-dismiss="modal" (click)="atualizar()">Atualizar</button>
                </div>
              </div>
            </div>
          </div>
          <!-- MEUS PRODUTOS -->
          <div class="tab-pane fade" id="v-pills-profile" role="tabpanel" aria-labelledby="v-pills-profile-tab">
            <nav aria-label="menu">
              <div class="nav nav-tabs" id="nav-tab" role="tablist">
                <a class="nav-item nav-link active" id="nav-home-tab" data-toggle="tab" href="#nav-home" role="tab"
                  aria-controls="nav-home" aria-selected="true">Meus Produtos
                </a>

                <a class="nav-item nav-link" id="nav-profile-tab" data-toggle="tab" href="#nav-profile" role="tab"
                  aria-controls="nav-profile" aria-selected="false" (click)="findUsuarioById()">Cadastrar</a>
              </div>
            </nav>
            <!-- VISUALIZAR TODOS MEUS PRODUTOS JA CADASTRADOS -->
            <div class="tab-content" id="nav-tabContent">
              <div class="tab-pane fade show active" id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab">
                <ng-container *ngIf="usuario.produto.length != 0; else elseTemplate">
                  <div class="col-md-12 d-flex flex-wrap justify-content-center" style="background-color: white">
                    <div *ngFor="let item of usuario.produto"
                      class="d-flex align-items-center justify-content-center m-3">
                      <div class="card efeitoFruta d-flex align-items-center justify-content-center"
                        style="width: 14rem">
                        <img class="card-img-top d-flex justify-content-center w-100" src="{{item.foto}}" alt="{{item.nome}}" />
                        <div class="card-body">
                          <h5 class="card-title">{{ item.nome }}</h5>

                          <div class="mb-2">
                            <p class="card-text negrito">
                              Preço: R${{ item.preco | number: '1.2-2' }}
                            </p>
                          </div>
                          <div class="qtd-buy mb-2 d-flex align-items-center justify-content-center"
                            style="width: max-content">
                            <button type="button" class="btn btn-comprar-carousel" style="height: 42px; width: 182px"
                              [routerLink]="['/produtos', item.id]">
                              Ver produto
                            </button>
                          </div>
                          <div class="qtd-buy d-flex align-items-center justify-content-center">
                            <button type="button " class="btn btn-info mr-2" data-target="#modalEditar"
                              data-toggle="modal" (click)="findProdutoById(item.id)">
                              Atualizar
                            </button>
                            <button type="button" class="btn btn-danger" data-target="#modalExcluir" data-toggle="modal"
                              (click)="getIdProduto(item.id)">
                              Deletar
                            </button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </ng-container>

                <ng-template #elseTemplate>
                  <div class="col-md-12 d-flex text-center justify-content-center align-items-center flex-column p-5"
                    style="background-color: white; height: fit-content">
                    <h5 class="m-3">
                      Você ainda não possui produtos cadastrados
                    </h5>
                    <img src="../../../assets/svg/harvest.svg" alt="imagem de tres frutas juntas em fundo branco" />
                    <h5 class="m-3">
                      cadastre seus produtos e comece a vender hoje mesmo!
                    </h5>
                  </div>
                </ng-template>
                <!-- /VISUALIZAR TODOS PRODUTOS JA CADASTRADOS -->
              </div>
              <!-- CADASTRAR NOVOS PRODUTOS -->
              <div class="tab-pane fade" id="nav-profile" role="tabpanel" aria-labelledby="nav-profile-tab">
                <div class="col-md-12 pt-3 px-5 m d-flex flex-wrap flex-column justify-content-center"
                  style="background-color: white">
                  <div class="form-group">
                    <label for="titulo">Produto</label>
                    <input [(ngModel)]="produto.nome" type="text" class="form-control" id="titulo"
                      placeholder="Digite o nome do produto" />
                  </div>

                  <div class="form-group">
                    <label for="titulo">Descrição</label>
                    <textarea maxlength="240" placeholder="Faça uma descrição para seu produto de até 240 caracteres" id="descricao" name="descricao" class="form-control" [(ngModel)]="produto.descricao" rows="4" cols="50"></textarea>
                  </div>
                  <div class="form-group">
                    <label for="texto">Preço</label>
                    <input [(ngModel)]="produto.preco" type="number" min="0" class="form-control" step="0.01" id="preco"
                      placeholder="Digite o preço" />
                  </div>
                  <div class="form-group">
                    <label for="texto">Quantidade Estoque</label>
                    <input [(ngModel)]="produto.qtdeEstoque" min="1" type="number" class="form-control" id="qtde"
                      placeholder="Digite a quantidade de estoque" />
                  </div>
                  <div class="form-group">
                    <label for="texto">Foto</label>
                    <input [(ngModel)]="produto.foto" type="text" class="form-control" id="foto"
                      placeholder="Insira o link da foto" />
                    <!-- INSERIR REFERENCIA FOTO -->
                  </div>
                  <div class="form-group">
                    <label for="tema">Escolha uma categoria: </label>
                    <select name="tema" id="tema" class="form-control" [(ngModel)]="idCategoria"
                      (change)="findByIdCategoria()">
                      <option *ngFor="let item of listaCategoria" value="{{ item.id }}">
                        {{ item.nome }}
                      </option>
                    </select>
                  </div>
                  <div class="d-flex justify-content-center mb-3">
                    <button class="btn btn-danger mr-4" routerLink="/inicio">
                      Cancelar
                    </button>
                    <button class="btn btn-success" (click)="cadastrarProduto()">
                      Cadastrar
                    </button>
                  </div>
                </div>
              </div>
              <!-- /CADASTRAR NOVOS PRODUTOS -->
            </div>
          </div>
          <!-- COMPRAS REALIZADAS -->
          <div class="tab-pane fade" id="v-pills-messages" role="tabpanel" aria-labelledby="v-pills-messages-tab">
            <div class="container-fluid justify-content-center d-flex flex-column align-items-center"
              style="background-color: white; height: fit-content">
              <div class=" m-5 justify-content-center d-flex flex-column align-items-center">
                <h5 class="mt-3 text-center">
                  Você ainda não possui nenhum produto em sua cesta
                </h5>
                <img src="../../../assets/svg/shopping-cart.svg" alt="imagem de um carrinho de compras" />
                <h5 class="mb-5 text-center">
                  para ir para nossa pagina de produtos
                  <a routerLink="/produtos">clique aqui</a>
                </h5>
              </div>
            </div>
          </div>
          <div class="tab-pane fade show" id="v-pills-adm" role="tabpanel" aria-labelledby="v-pills-adm-tab">

            <!-- NAV ADM -->
            <nav aria-label="nav-adm">
              <div class="nav nav-tabs" id="nav-tab" role="tablist">

                <a class="nav-item nav-link active" id="nav-usuarios-tab" data-toggle="tab" href="#nav-usuarios "
                  role="tab" aria-controls="nav-usuarios" aria-selected="true" (click)='getAllUsuarios()'>Usuarios
                </a>
                <a class="nav-item nav-link" id="nav-categoria-tab" data-toggle="tab" href="#nav-categorias" role="tab"
                  aria-controls="nav-categorias" aria-selected="false">Categorias</a>

                <a class="nav-item nav-link" id="nav-produtos-tab" data-toggle="tab" href="#nav-produtos" role="tab"
                  aria-controls="nav-produtos" aria-selected="false" (click)="getAllProdutos()">Produtos</a>
              </div>
            </nav>
            <!-- /NAV ADM -->


            <div class="tab-content" id="nav-tabContent">
              <!-- USUARIOS -->
              <div class="tab-pane fade show active" id="nav-usuarios" role="tabpanel"
                aria-labelledby="nav-usuarios-tab">

                <div class="col-md-12 d-flex flex-column" style="background-color: white; height: fit-content">
                  <ng-container *ngIf="usuario.usuario.length != 0; else elseTemplate">
                    <h4 class="text-center my-4">
                      Verifique os usuarios cadastrados
                    </h4>

                    <div class="row mt-3 mb-5 d-flex justify-content-center">
                      <div class="col-md-12 flex-wrap align-items-center justify-content-center d-flex">
                        <div class="table-responsive-lg">
                          <table class="table">
                            <thead>
                              <tr>
                                <th scope="col">ID</th>
                                <th scope="col">Nome</th>
                                <th scope="col">Usuário</th>
                                <th scope="col">Deletar</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr *ngFor="let item of listaUsuarios">
                               
                                <th scope="row" class="pb-0">{{ item.id }}</th>
                                <td class="pb-2">{{ item.nome }}</td>
                                <td class="pb-2"> {{ item.usuario }}</td>
                                <td class="pt-2"><button type="button" class="btn btn-danger" data-toggle="modal" data-target="#modalUsuario" 
                                  (click)='getIdUsuario(item.id)'>
                                  Deletar
                                </button>
                              
                              </tr>
                            </tbody>
                          </table>
                        </div>
                      </div>
                    </div>

                  </ng-container>
                  <ng-template #elseTemplate>
                    <div class="col-md-12 d-flex text-center justify-content-center align-items-center flex-column p-5"
                      style="background-color: white; height: fit-content">
                      <h5 class="my-4">
                        Você ainda não possui usuários cadastrados
                      </h5>
                    </div>
                  </ng-template>
                </div>
              </div>

              <!-- /USUARIOS -->

              <!-- CATEGORIAS -->
              <div class="tab-pane fade" id="nav-categorias" role="tabpanel" aria-labelledby="nav-categorias-tab">
                <div class="col-md-12 d-flex flex-column" style="background-color: white; height: fit-content">
                  <!-- INCLUA NOVA CATEGORIA -->
                  <h4 class="text-center my-4">Inclua novas categorias:</h4>
                  <div class="row d-flex justify-content-center mx-3 flex-column">
                    <div class="form-group justify-content-center d-flex align-items-center flex-column">
                      <input [(ngModel)]="categoria.nome" style="max-width: 400px;" type="text"
                        class="form-control mb-2" id="nome" placeholder="Insira a categoria:" />
                    </div>
                    <div class="d-flex justify-content-center">
                      <button class="btn btn-success" (click)="cadastrarCategoria()">
                        Cadastrar
                      </button>
                    </div>
                  </div>
                  <!-- /INCLUA NOVA CATEGORIA -->
                  <hr style="color:#57732d">
                  <h4 class="text-center">
                    Edite ou exclua as categorias cadastradas:
                  </h4>
                  <div class="row mt-3 mb-5 d-flex justify-content-center">
                    <div class="col-md-12 flex-wrap align-items-center justify-content-center d-flex">
                      <div class="table-responsive-lg">
                        <table class="table">
                          <thead>
                            <tr>
                              <th scope="col">Id</th>
                              <th scope="col">Categoria</th>
                              <th scope="col">Editar</th>
                              <th scope="col">Excluir</th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr *ngFor="let categoria of listaCategoria">
                              <th scope="row" class="pb-0">{{ categoria.id }}</th>
                              <td class="pb-0">{{ categoria.nome }}</td>
                              <td class="pt-2"><button class="btn btn-info" data-target="#modalEditarCategoria"
                                  data-toggle="modal" (click)="findCategoriaById(categoria.id)">
                                  Editar
                                </button></td>
                              <td class="pt-2"><button class="btn btn-danger" data-target="#modalExcluirCategoria"
                                  data-toggle="modal" (click)="getIdCategoria(categoria.id)">
                                  Apagar
                                </button></td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- CATEGORIAS -->
              <!-- TODOS OS PRODUTOS -->
              <div class="tab-pane fade" id="nav-produtos" role="tabpanel" aria-labelledby="nav-produtos-tab">
                <div class="col-md-12 d-flex flex-wrap justify-content-center" style="background-color: white">
                  <ng-container *ngIf="tamListaProdutos != 0; else elseTemplateAdministrador">
                  <div *ngFor="let item of listaProdutos" class="d-flex align-items-center justify-content-center m-3">
                    
                    <div class="card efeitoFruta d-flex align-items-center justify-content-center" style="width: 14rem">
                      <img class="card-img-top w-100" src="{{item.foto}}" alt="{{item.nome}}" />
                      <div class="card-body">
                        <h5 class="card-title">{{ item.nome }}</h5>

                        <div class="mb-2">
                          <p class="card-text negrito">
                            Preço: R${{ item.preco | number: '1.2-2' }}
                          </p>
                        </div>
                        <div class="qtd-buy mb-2 d-flex align-items-center justify-content-center"
                          style="width: max-content">
                          <button type="button" class="btn btn-comprar-carousel" style="height: 42px; width: 182px"
                            [routerLink]="['/produtos', item.id]">
                            Ver produto
                          </button>
                        </div>
                        <div class="qtd-buy d-flex align-items-center justify-content-center">
                          <button type="button " class="btn btn-info mr-2" data-target="#modalEditar"
                            data-toggle="modal" (click)="findProdutoById(item.id)">
                            Atualizar
                          </button>
                          <button type="button" class="btn btn-danger" data-target="#modalExcluir" data-toggle="modal"
                            (click)="getIdProduto(item.id)">
                            Deletar
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                </ng-container>
                <ng-template #elseTemplateAdministrador>
                  <div class="col-md-12 d-flex text-center justify-content-center align-items-center flex-column p-5"
                    style="background-color: white; height: fit-content">
                    <h5 class="m-3">
                      Não há produtos cadastrados na plataforma!
                    </h5>
                    <img src="../../../assets/svg/harvest.svg" alt="imagem de tres frutas juntas em fundo branco" />
                    <h5 class="m-3">
                      
                    </h5>
                  </div>
                </ng-template>
                </div>
              </div>
            </div>
          </div>
        </div>

  
        <!-- /TODOS OS PRODUTOS -->
      </div>
    </div>
  </div>
</div>
<!-- /MENU LATERAL DE PERFIL -->